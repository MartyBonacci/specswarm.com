---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Button from '../components/Button.astro';
import FeatureCard from '../components/FeatureCard.astro';

const capabilities = [
  {
    icon: 'shield',
    title: 'Tech Stack Enforcement',
    description: 'Define your approved technologies once in tech-stack.md. SpecSwarm validates every feature against your stack during planning, preventing 95% of technology drift.',
    metric: '95%'
  },
  {
    icon: 'zap',
    title: 'Simplified Workflow',
    description: 'Build complete features with 2 commands instead of 7+. /specswarm:build handles spec → plan → tasks → implementation → quality. Then /specswarm:ship merges with quality gates.',
    metric: '70%'
  },
  {
    icon: 'check-circle',
    title: 'Quality Validation',
    description: '0-100 point scoring system with configurable thresholds. Analyzes test coverage, bundle size, code quality, and more. Blocks merges below standards with clear remediation steps.',
    metric: '85+'
  },
  {
    icon: 'layers',
    title: 'Autonomous Orchestration',
    description: 'Natural language feature descriptions become working code. Handles planning, task breakdown, implementation, testing, and quality analysis autonomously with intelligent retry logic.',
  },
  {
    icon: 'target',
    title: 'Production Validated',
    description: 'Proven in real-world React 19 + Redux + Three.js application. Feature 015: 76/76 tasks completed, 96.3% test pass rate, 3,500+ lines of test code, 1,530 lines of docs.',
    metric: '96.3%'
  },
  {
    icon: 'trending-up',
    title: 'Developer Control',
    description: 'Choose your level of control. Simplified workflow for speed, granular workflow for complex features. Decision checkpoints, not black box automation. You stay in charge.',
  },
];

const workflowComparison = [
  {
    aspect: 'Commands Required',
    simplified: '2 commands',
    granular: '7 commands',
  },
  {
    aspect: 'Time to Complete',
    simplified: '4-5 hours',
    granular: '4-5 hours',
  },
  {
    aspect: 'Clarification Phase',
    simplified: 'Interactive (built-in)',
    granular: 'Separate step',
  },
  {
    aspect: 'Planning Review',
    simplified: 'Autonomous',
    granular: 'Manual review',
  },
  {
    aspect: 'Task Execution',
    simplified: 'Autonomous',
    granular: 'Step-by-step',
  },
  {
    aspect: 'Quality Analysis',
    simplified: 'Built-in',
    granular: 'Separate command',
  },
  {
    aspect: 'Best For',
    simplified: 'Most features',
    granular: 'Complex architectural changes',
  },
];
---

<BaseLayout
  title="Features - SpecSwarm"
  description="Explore SpecSwarm's complete feature set: tech stack enforcement, simplified workflows, quality validation, autonomous orchestration, and production-proven results."
>
  <Header />

  <main>
    <!-- Hero Section -->
    <section class="bg-[var(--color-background)] border-b border-[var(--color-border)] py-[var(--spacing-section-md)]">
      <div class="content-max">
        <div class="max-w-[48rem] mx-auto text-center">
          <h1 class="text-[var(--font-size-display-l)] font-bold text-[var(--color-primary)] m-0 mb-[var(--spacing-md)] md:text-[var(--font-size-display-m)]">Complete Feature Set</h1>
          <p class="text-[var(--font-size-paragraph-l)] text-[var(--color-secondary)] leading-relaxed m-0">
            Everything you need to maintain standards while moving fast. Tech stack enforcement, quality gates, and autonomous orchestration.
          </p>
        </div>
      </div>
    </section>

    <!-- Core Capabilities -->
    <section class="py-[var(--spacing-section-lg)]">
      <div class="content-max">
        <div class="text-center max-w-[48rem] mx-auto mb-[var(--spacing-xl)]">
          <h2 class="text-[var(--font-size-display-m)] font-bold text-[var(--color-primary)] m-0 mb-[var(--spacing-sm)]">Six Core Capabilities</h2>
          <p class="text-[var(--font-size-paragraph-m)] text-[var(--color-secondary)] leading-relaxed m-0">
            Built for developers who want speed without sacrificing control or quality
          </p>
        </div>

        <div class="grid grid-cols-[repeat(auto-fit,minmax(min(100%,22rem),1fr))] gap-[var(--spacing-lg)] sm:grid-cols-1">
          {capabilities.map((capability) => (
            <FeatureCard
              icon={capability.icon}
              title={capability.title}
              description={capability.description}
              metric={capability.metric}
            />
          ))}
        </div>
      </div>
    </section>

    <!-- Visual Divider -->
    <div class="h-[140px] flex items-center justify-center overflow-hidden my-[var(--spacing-xl)]" aria-hidden="true">
      <img src="/tracks.svg" alt="" loading="lazy" class="w-full max-w-[900px] h-auto opacity-10" />
    </div>

    <!-- Workflow Comparison -->
    <section class="bg-[var(--color-surface)] py-[var(--spacing-section-lg)]">
      <div class="content-max">
        <div class="text-center max-w-[48rem] mx-auto mb-[var(--spacing-xl)]">
          <h2 class="text-[var(--font-size-display-m)] font-bold text-[var(--color-primary)] m-0 mb-[var(--spacing-sm)]">Simplified vs. Granular Workflow</h2>
          <p class="text-[var(--font-size-paragraph-m)] text-[var(--color-secondary)] leading-relaxed m-0">
            Choose the workflow that fits your needs. Both deliver the same quality results.
          </p>
        </div>

        <div class="overflow-x-auto mb-[var(--spacing-lg)]">
          <table class="w-full border-collapse bg-[var(--color-surface)] border border-[var(--color-border)] rounded-xl overflow-hidden">
            <thead class="bg-[var(--color-background)]">
              <tr>
                <th class="p-4 px-6 text-left text-sm font-bold text-[var(--color-primary)] uppercase tracking-wide border-b border-[var(--color-border)] md:p-3 md:px-4 md:text-[0.8125rem]">Aspect</th>
                <th class="p-4 px-6 text-left text-sm font-bold text-[var(--color-primary)] uppercase tracking-wide border-b border-[var(--color-border)] md:p-3 md:px-4 md:text-[0.8125rem]">Simplified (Recommended)</th>
                <th class="p-4 px-6 text-left text-sm font-bold text-[var(--color-primary)] uppercase tracking-wide border-b border-[var(--color-border)] md:p-3 md:px-4 md:text-[0.8125rem]">Granular (Advanced)</th>
              </tr>
            </thead>
            <tbody>
              {workflowComparison.map((row, index) => (
                <tr>
                  <td class:list={[
                    'p-4 px-6 text-[0.9375rem] font-semibold text-[var(--color-primary)] border-b border-[var(--color-border)] md:p-3 md:px-4 md:text-[0.8125rem]',
                    index === workflowComparison.length - 1 && '!border-b-0'
                  ]}>{row.aspect}</td>
                  <td class:list={[
                    'p-4 px-6 text-[0.9375rem] font-medium text-[var(--color-accent)] border-b border-[var(--color-border)] md:p-3 md:px-4 md:text-[0.8125rem]',
                    index === workflowComparison.length - 1 && '!border-b-0'
                  ]}>{row.simplified}</td>
                  <td class:list={[
                    'p-4 px-6 text-[0.9375rem] text-[var(--color-secondary)] border-b border-[var(--color-border)] md:p-3 md:px-4 md:text-[0.8125rem]',
                    index === workflowComparison.length - 1 && '!border-b-0'
                  ]}>{row.granular}</td>
                </tr>
              ))}
            </tbody>
          </table>
        </div>

        <div class="p-[var(--spacing-md)] bg-[rgba(217,119,87,0.1)] rounded-lg text-center">
          <p class="text-[0.9375rem] text-[var(--color-secondary)] m-0">
            <strong class="text-[var(--color-primary)]">New to SpecSwarm?</strong> Start with the simplified workflow. Switch to granular when you need step-by-step control for complex architectural changes.
          </p>
        </div>
      </div>
    </section>

    <!-- Command Categories -->
    <section class="py-[var(--spacing-section-lg)]">
      <div class="content-max">
        <div class="text-center max-w-[48rem] mx-auto mb-[var(--spacing-xl)]">
          <h2 class="text-[var(--font-size-display-m)] font-bold text-[var(--color-primary)] m-0 mb-[var(--spacing-sm)]">28 Commands Organized by Category</h2>
          <p class="text-[var(--font-size-paragraph-m)] text-[var(--color-secondary)] leading-relaxed m-0">
            Comprehensive toolkit for the complete development lifecycle
          </p>
        </div>

        <div class="grid grid-cols-[repeat(auto-fit,minmax(min(100%,18rem),1fr))] gap-[var(--spacing-lg)] sm:grid-cols-1">
          <div class="p-[var(--spacing-lg)] bg-[var(--color-surface)] border border-[var(--color-border)] rounded-xl md:p-[var(--spacing-md)]">
            <h3 class="text-base font-bold text-[var(--color-primary)] m-0 mb-[var(--spacing-md)] pb-[var(--spacing-sm)] border-b-2 border-[var(--color-accent)]">High-Level (v3.0)</h3>
            <ul class="list-none p-0 m-0 flex flex-col gap-3">
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:build</code> - Complete feature development</li>
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:fix</code> - Test-driven bug fixing with retry</li>
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:upgrade</code> - Framework/dependency migrations</li>
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:ship</code> - Quality-gated merge</li>
            </ul>
          </div>

          <div class="p-[var(--spacing-lg)] bg-[var(--color-surface)] border border-[var(--color-border)] rounded-xl md:p-[var(--spacing-md)]">
            <h3 class="text-base font-bold text-[var(--color-primary)] m-0 mb-[var(--spacing-md)] pb-[var(--spacing-sm)] border-b-2 border-[var(--color-accent)]">New Features</h3>
            <ul class="list-none p-0 m-0 flex flex-col gap-3">
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:specify</code> - Create feature specification</li>
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:clarify</code> - Ask clarification questions</li>
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:plan</code> - Design implementation</li>
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:tasks</code> - Generate task breakdown</li>
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:implement</code> - Execute implementation</li>
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:complete</code> - Finish and merge</li>
            </ul>
          </div>

          <div class="p-[var(--spacing-lg)] bg-[var(--color-surface)] border border-[var(--color-border)] rounded-xl md:p-[var(--spacing-md)]">
            <h3 class="text-base font-bold text-[var(--color-primary)] m-0 mb-[var(--spacing-md)] pb-[var(--spacing-sm)] border-b-2 border-[var(--color-accent)]">Bug & Issue Management</h3>
            <ul class="list-none p-0 m-0 flex flex-col gap-3">
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:bugfix</code> - Regression-test-first fixing</li>
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:hotfix</code> - Emergency production fixes</li>
            </ul>
          </div>

          <div class="p-[var(--spacing-lg)] bg-[var(--color-surface)] border border-[var(--color-border)] rounded-xl md:p-[var(--spacing-md)]">
            <h3 class="text-base font-bold text-[var(--color-primary)] m-0 mb-[var(--spacing-md)] pb-[var(--spacing-sm)] border-b-2 border-[var(--color-accent)]">Code Maintenance</h3>
            <ul class="list-none p-0 m-0 flex flex-col gap-3">
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:modify</code> - Feature modifications</li>
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:refactor</code> - Quality improvements</li>
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:deprecate</code> - Phased feature sunset</li>
            </ul>
          </div>

          <div class="p-[var(--spacing-lg)] bg-[var(--color-surface)] border border-[var(--color-border)] rounded-xl md:p-[var(--spacing-md)]">
            <h3 class="text-base font-bold text-[var(--color-primary)] m-0 mb-[var(--spacing-md)] pb-[var(--spacing-sm)] border-b-2 border-[var(--color-accent)]">Quality & Analysis</h3>
            <ul class="list-none p-0 m-0 flex flex-col gap-3">
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:analyze-quality</code> - 0-100 scoring</li>
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:impact</code> - Impact analysis</li>
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:suggest</code> - AI workflow recommendations</li>
            </ul>
          </div>

          <div class="p-[var(--spacing-lg)] bg-[var(--color-surface)] border border-[var(--color-border)] rounded-xl md:p-[var(--spacing-md)]">
            <h3 class="text-base font-bold text-[var(--color-primary)] m-0 mb-[var(--spacing-md)] pb-[var(--spacing-sm)] border-b-2 border-[var(--color-accent)]">Advanced Orchestration</h3>
            <ul class="list-none p-0 m-0 flex flex-col gap-3">
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:orchestrate-feature</code> - Autonomous lifecycle</li>
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:validate</code> - Multi-type validation</li>
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:coordinate</code> - Multi-bug debugging</li>
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:metrics</code> - Performance analytics</li>
            </ul>
          </div>

          <div class="p-[var(--spacing-lg)] bg-[var(--color-surface)] border border-[var(--color-border)] rounded-xl md:p-[var(--spacing-md)]">
            <h3 class="text-base font-bold text-[var(--color-primary)] m-0 mb-[var(--spacing-md)] pb-[var(--spacing-sm)] border-b-2 border-[var(--color-accent)]">Project Setup</h3>
            <ul class="list-none p-0 m-0 flex flex-col gap-3">
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:init</code> - Initialize project (v3.1)</li>
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:constitution</code> - Project governance</li>
              <li class="text-sm text-[var(--color-secondary)] leading-relaxed"><code class="text-[0.8125rem] text-[var(--color-accent)] bg-[rgba(217,119,87,0.1)] px-1.5 py-0.5 rounded">/specswarm:checklist</code> - Custom checklists</li>
            </ul>
          </div>
        </div>

        <div class="text-center mt-[var(--spacing-xl)]">
          <Button href="/docs" variant="secondary" size="lg">
            View Full Documentation
          </Button>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="bg-[var(--color-background)] py-[var(--spacing-section-xl)]">
      <div class="content-max">
        <div class="max-w-[48rem] mx-auto text-center flex flex-col items-center gap-[var(--spacing-lg)]">
          <h2 class="text-[var(--font-size-display-m)] font-bold text-[var(--color-primary)] m-0">Ready to Get Started?</h2>
          <p class="text-[var(--font-size-paragraph-m)] text-[var(--color-secondary)] leading-relaxed m-0">
            Install SpecSwarm and start building features with tech stack enforcement and quality gates.
          </p>
          <div class="flex gap-[var(--spacing-md)] flex-wrap justify-center md:flex-col md:w-full [&>*]:md:w-full">
            <Button href="/get-started" variant="primary" size="lg">
              Get Started
            </Button>
            <Button href="/use-cases" variant="secondary" size="lg">
              View Use Cases
            </Button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</BaseLayout>
